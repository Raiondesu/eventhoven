!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((n=n||self).eventhoven={})}(this,function(n){"use strict";function r(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}function t(n,r){return function(n){if(Array.isArray(n))return n}(n)||function(n,r){if(!(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n)))return;var t=[],e=!0,o=!1,u=void 0;try{for(var i,c=n[Symbol.iterator]();!(e=(i=c.next()).done)&&(t.push(i.value),!r||t.length!==r);e=!0);}catch(n){o=!0,u=n}finally{try{e||null==c.return||c.return()}finally{if(o)throw u}}return t}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function e(n){return function(n){if(Array.isArray(n)){for(var r=0,t=new Array(n.length);r<n.length;r++)t[r]=n[r];return t}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o,u=function(n,r){return[].concat(e(Object.keys(n)),e(Object.getOwnPropertySymbols(n))).reduce(function(n,t){return n[t]=r(t),n},{})},i=function(n){return u(n,function(r){return(new Map).set(n[r],function(){})})},c=i((r(o={},"EMIT",function(n,r,t,e){}),r(o,"SUBSCRIBE",function(n,r,t,e){}),r(o,"UNSUBSCRIBE",function(n,r,t,e){}),o)),f=function(n){return function(r){return function(){for(var o=arguments.length,u=new Array(o),i=0;i<o;i++)u[i]=arguments[i];return new Promise(function(o,i){return Promise.all([a("EMIT")(n,r,u)].concat(e(e(n[r]||[]).map(function(n){var e=t(n,2),o=e[0],i=e[1];return o&&o.apply(void 0,[{event:r,unsubscribe:i}].concat(u))})))).then(function(n){return o()},i)})}}},a=function(n){return function(){return(arguments.length<=0?void 0:arguments[0])!==c?f(c)(n).apply(void 0,arguments):Promise.resolve()}},l=function(n){return function(r){return function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];if(r in n){var u=!0,i=!1,c=void 0;try{for(var f,l=(e.length>0?e:n[r].keys())[Symbol.iterator]();!(u=(f=l.next()).done);u=!0){var s=f.value;a("UNSUBSCRIBE")(n,r,s),n[r].delete(s)}}catch(n){i=!0,c=n}finally{try{u||null==l.return||l.return()}finally{if(i)throw c}}}}}},s=l,y=function(n){return function(r){var t=function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return function(){return l(n)(r).apply(void 0,e)}};return function(){for(var o=arguments.length,u=new Array(o),i=0;i<o;i++)u[i]=arguments[i];return t.apply(void 0,e(u.map(function(e){return a("SUBSCRIBE")(n,r,e),r in n&&n[r].set(e,t(e)),e})))}}},b=y,v=function(n){return function(r){return u(r,n(r))}},p=v(f),d=v(y),m=v(l),h=function(n){return function(r){return function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];u(r,function(t){return n(r)(t).apply(void 0,e)})}}},A=h(y),g=A,w=h(l),S=w,j=g(c),I=S(c),O=function(n,r,t,o){var u,i=n.event;return(u=console).log.apply(u,[(new Date).toJSON().substr(14,9),"[".concat(i,' "').concat(String(t),'"').concat(t in r?"":" (INVALID)","] -")].concat(e(Array.isArray(o)?o:[o])))},E=function(n){return function(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];return r.unsubscribe(),n.apply(void 0,[r].concat(e))}},B=function(n){return function(r){return new Promise(function(t){return y(n)(r)(E(function(n){for(var r=arguments.length,e=new Array(r>1?r-1:0),o=1;o<r;o++)e[o-1]=arguments[o];return t(e)}))})}};n.debug=function(n){var r=n.enable,t=n.log;return(r?j:I)(void 0===t?O:t)},n.emit=f,n.emitAll=function(n){return function(r){return u(n,function(t){return f(n)(t).apply(void 0,e(r[t]))})}},n.emitCollection=p,n.emitMeta=a,n.eventCollection=function(n){return{emit:p(n),subscribe:d(n),unsubscribe:m(n)}},n.eventMap=i,n.harmonicWait=function(n){return function(r){return function(){return B(n)(r)}}},n.metaEvents=c,n.off=s,n.offAll=S,n.on=b,n.onAll=g,n.once=E,n.subscribe=y,n.subscribeCollection=d,n.subscribeToAll=A,n.unsubscribe=l,n.unsubscribeCollection=m,n.unsubscribeFromAll=w,n.wait=B,Object.defineProperty(n,"__esModule",{value:!0})});
//# sourceMappingURL=umd.js.map
