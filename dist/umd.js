!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((n=n||self).eventhoven={})}(this,function(n){"use strict";function r(n,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function t(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}function e(n,r){return function(n){if(Array.isArray(n))return n}(n)||function(n,r){if(!(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n)))return;var t=[],e=!0,o=!1,u=void 0;try{for(var i,a=n[Symbol.iterator]();!(e=(i=a.next()).done)&&(t.push(i.value),!r||t.length!==r);e=!0);}catch(n){o=!0,u=n}finally{try{e||null==a.return||a.return()}finally{if(o)throw u}}return t}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(n){return function(n){if(Array.isArray(n)){for(var r=0,t=new Array(n.length);r<n.length;r++)t[r]=n[r];return t}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u,i=function(n,r){return[].concat(o(Object.keys(n)),o(Object.getOwnPropertySymbols(n))).reduce(function(n,t){return n[t]=r(t),n},{})},a=function(n){return i(n,function(r){return(new Map).set(n[r],function(){})})},c=a((t(u={},"EMIT",function(n,r,t,e){}),t(u,"SUBSCRIBE",function(n,r,t,e){}),t(u,"UNSUBSCRIBE",function(n,r,t,e){}),u)),f=function(n){return function(r){return function(){for(var t=arguments.length,u=new Array(t),i=0;i<t;i++)u[i]=arguments[i];return l("EMIT")(n,r,u),Promise.all(o(n[r]||[]).map(function(n){var t=e(n,2),o=t[0],i=t[1];return o&&o.apply(void 0,[{event:r,unsubscribe:i}].concat(u))}))}}},l=function(n){return function(){return(arguments.length<=0?void 0:arguments[0])!==c?f(c)(n).apply(void 0,arguments):Promise.resolve([])}},y=function(n){return function(r){return function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];if(r in n){var u=!0,i=!1,a=void 0;try{for(var c,f=(e.length>0?e:n[r].keys())[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var y=c.value;l("UNSUBSCRIBE")(n,r,y),n[r].delete(y)}}catch(n){i=!0,a=n}finally{try{u||null==f.return||f.return()}finally{if(i)throw a}}}}}},s=y,v=function(n){return function(r){var t=function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return function(){return y(n)(r).apply(void 0,e)}};return function(){for(var e=arguments.length,u=new Array(e),i=0;i<e;i++)u[i]=arguments[i];return t.apply(void 0,o(u.map(function(e){return l("SUBSCRIBE")(n,r,e),r in n&&n[r].set(e,t(e)),e})))}}},p=v,b=function(n){return function(r){return i(r,n(r))}},h=b(f),m=b(v),d=b(y),g=function(n){return function(r){return function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];i(r,function(t){return n(r)(t).apply(void 0,e)})}}},w=g(v),A=w,S=g(y),j=S,E=A(c),O=j(c),I=function(n){return function(r){return(r?E:O)(n)}},k=I(function(n,r,t,e){var o=n.event;return console.log((new Date).toJSON().substr(14,9),"[".concat(o,' "').concat(String(t),'"').concat(t in r?"":" (INVALID)","] -"),e)}),C=function(n){return function(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];return r.unsubscribe(),n.apply(void 0,[r].concat(e))}},B=function(n){return function(r){return new Promise(function(t){return v(n)(r)(C(function(n){for(var r=arguments.length,e=new Array(r>1?r-1:0),o=1;o<r;o++)e[o-1]=arguments[o];return t(e)}))})}},P=function(){function n(r){!function(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}(this,n),this.events=r,this.map=a(r)}var t,e,o;return t=n,o=[{key:"emit",value:function(r,t){for(var e=arguments.length,o=new Array(e>2?e-2:0),u=2;u<e;u++)o[u-2]=arguments[u];return f(r instanceof n?r.map:r)(t).apply(void 0,o)}},{key:"on",value:function(r,t){for(var e=arguments.length,o=new Array(e>2?e-2:0),u=2;u<e;u++)o[u-2]=arguments[u];return p(r instanceof n?r.map:r)(t).apply(void 0,o)}},{key:"off",value:function(r,t){for(var e=arguments.length,o=new Array(e>2?e-2:0),u=2;u<e;u++)o[u-2]=arguments[u];return s(r instanceof n?r.map:r)(t).apply(void 0,o)}}],(e=[{key:"emit",value:function(n){for(var r=arguments.length,t=new Array(r>1?r-1:0),e=1;e<r;e++)t[e-1]=arguments[e];return f(this.map)(n).apply(void 0,t)}},{key:"on",value:function(n){for(var r=arguments.length,t=new Array(r>1?r-1:0),e=1;e<r;e++)t[e-1]=arguments[e];return p(this.map)(n).apply(void 0,t)}},{key:"off",value:function(n){for(var r=arguments.length,t=new Array(r>1?r-1:0),e=1;e<r;e++)t[e-1]=arguments[e];return s(this.map)(n).apply(void 0,t),this}}])&&r(t.prototype,e),o&&r(t,o),n}();n.Eventhoven=P,n.customDebug=I,n.debug=k,n.emit=f,n.emitAll=function(n){return function(r){return i(n,function(t){return f(n)(t).apply(void 0,o(r[t]))})}},n.emitCollection=h,n.emitMeta=l,n.eventCollection=function(n){return{emit:h(n),subscribe:m(n),unsubscribe:d(n)}},n.eventMap=a,n.harmonicWait=function(n){return function(r){return function(){return B(n)(r)}}},n.metaEvents=c,n.off=s,n.offAll=j,n.on=p,n.onAll=A,n.once=C,n.subscribe=v,n.subscribeCollection=m,n.subscribeToAll=w,n.unsubscribe=y,n.unsubscribeCollection=d,n.unsubscribeFromAll=S,n.wait=B,Object.defineProperty(n,"__esModule",{value:!0})});
//# sourceMappingURL=umd.js.map
